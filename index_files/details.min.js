/*! Minified JavaScript created in Discovery 10.06.2019. 2019-06-12 */

$(function(){var t=$("#staffViewOfOtherUserDOs"),i="View delivery options presented to other users";t.find("> div").length&&(t.hide(),$link=$("<a>",{href:"#",text:i,class:"discoveryPrimaryCallToActionLink",click:function(e){t.slideToggle(),$link.text()===i?$link.text("Hide delivery options presented to other users"):$link.text(i),e.preventDefault()}}).appendTo($("#staffViewOfOtherUserDOsWrapper")));var a=$("#imageViewerLink"),n=$("#imageViewerApp"),o="Preview an image of this record.";isBootstrapped=!1,a.text(o),$(".image-info").hide(),a.on("click touchstart",function(e){$(".image-info").toggle();a.attr("data-iaid"),a.attr("data-thumbServiceUrl");if(a.text()===o)return isBootstrapped?n.show():(isBootstrapped=!0,angular.module("imageViewerApp"),n.show(),angular.bootstrap(document.getElementById("imageViewerApp"),["imageViewerApp"])),a.text("Hide images"),void a.toggleClass("expandedImageViewer");a.text(o),a.toggleClass("expandedImageViewer"),n.hide(),Modernizr.hashchange||e.preventDefault()}),function(){$details=$("#name-authority .asset-details"),$details.hide();var e=$("<button>",{text:"View details of this record creator",class:"call-to-action-link",click:function(){$details.is(":visible")?$(this).text("View details of this record creator"):$(this).text("Hide details of this record creator"),$details.toggle()}}).css({float:"right"});$details.after(e)}()}),$(document).ready(function(){$supplemental=$(".supplemental-content"),$expander=$(".expander-link"),$supplemental.hide(),$expander.on("click",function(e){e.preventDefault(),$(this).toggleClass("expanded"),$supplemental.toggle()})});var showAll='<p class="center"><a id="show-all">Show all matches</a></p>',numItems=$(".ttt-item").length;$(document).ready(function(){$(".ttt-item").hide(),$(".ttt-item:lt(3)").show(),3<numItems&&$("#traces-through-time-collection").append(showAll),$("#show-all").on("click",function(){$(".ttt-item").show(),$(this).hide()})}),$(document).ready(function(){var t=function(e){e.attr("aria-expanded",function(e,t){return"true"==t?"false":"true"})};$("#suggest-a-correction-form").hide(),$("#show-suggestion-form").on("click",function(e){t($(this)),e.preventDefault(),1==$("#suggest-a-correction-form").length&&($("#suggest-a-correction-form").toggle(),$("#fieldContainingError").focus(),t($("#suggest-a-correction-form")))})}),$(document).ready(function(){$("#hierarchy button").on("click",function(){$(window).width()<=768&&($("#hierarchy ul > li").slideToggle("fast"),$(this).toggleClass("upToggle"),$("#hierarchy nav > a").toggleClass("openFolder"))}),$("#imageViewerLink").on("click",function(e){e.preventDefault()}),function(){$("#invite-feedback").next(".emphasis-block"),$("#imageViewerApp").length,document.querySelector("#tag-delete-success-message"),$("#invite-feedback").next().is(".emphasis-block");$("#add-tag-list .emphasis-block","#reportTagCompletionMessage").is(":visible")&&document.getElementById("user-contributions").scrollIntoView(!0);$(".emphasis-block").is(":visible")&&document.getElementById("invite-feedback").scrollIntoView(!0)}()}),function(d){d.fn.flag_tagging=function(e){return this.each(function(){var r=d(this),s=d("#report-tag",r),l=d(".general-tag-list-item",r),c=function(e){e.attr("aria-expanded",function(e,t){return"true"==t?"false":"true"})};l.on("click",".flagTagLink",function(e){c(d(this)),c(s),e.preventDefault();var t=d(e.delegateTarget),i=d(e.target).data("tagid"),a=d(".tagName",t).text(),n=d(".tagToBeRemoved",r),o=d("#tagId",r);$hiddenFieldValue=d("#tagValue",r),l.removeClass("selected-for-flagging"),t.addClass("selected-for-flagging"),n.text(a),o.val(i),$hiddenFieldValue.val(a),s.show()}),d("input[type=reset]",r).on("click",function(e){c(s),c(d(".flagTagLink")),e.preventDefault(),s.hide(),l.removeClass("selected-for-flagging")})})}}(jQuery),jQuery.fn.confirmDeleteFlag=function(){return this.on("click",function(){return confirm("Are you sure you want to delete this tag?")})},$("#user-contributions").flag_tagging(),$("a.deleteTag").confirmDeleteFlag();var imageviewerFeedback=function(){$("#imageViewverFeedbackWidget").show();var i,a=document.getElementsByName("choice"),n=[],t=$("#imageViewverFeedbackWidget form");$("input[name*='choice']").on("click",function(){$("#submitImageViewerFeedback").prop("disabled",!1)}),t.on("submit",function(e){e.preventDefault(),function(){for(var e=0;e<a.length;e++)if(a[e].checked){i=a[e].value;break}n.push(i);var t=n.pop();dataLayer.push({event:"Discovery",eventCategory:"Discovery",eventAction:"Imageviwer Feedback",eventLabel:"Imageviewer hijack keys is currently being fixed.",eventValue:t})}(),t.slideUp("slow",function(){}),$("#imageViewverFeedbackWidget p").replaceWith("<p style='margin-bottom: 0'>Thank you for your feedback.</p>").fadeIn()})};imageviewerFeedback();